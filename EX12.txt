CREATE DATABASE EJERCICIO_12;
USE EJERCICIO_12;
GO
CREATE TABLE PROFESORES (
	NOMBRE VARCHAR(50) NOT NULL,
	APELLIDO1 VARCHAR(50) UNIQUE NOT NULL,
	APELLIDO2 VARCHAR(50) UNIQUE,
	DNI VARCHAR(9) PRIMARY KEY,
	DIRECCION VARCHAR(255),
	TITULO VARCHAR(100),
	GANA INT NOT NULL
)
CREATE TABLE CURSOS (
	NOMBRE_CURSO VARCHAR(255) UNIQUE,
	COD_CURSO INT PRIMARY KEY,
	DNI_PROFESSOR VARCHAR(9) FOREIGN KEY REFERENCES PROFESORES(DNI) ON DELETE SET NULL ON UPDATE CASCADE,
	MAXIMO_ALUMNOS INT,
	FECHA_INICIO DATE NOT NULL,
	FECHA_FIN DATE NOT NULL,
	NUM_HORAS INT NOT NULL,
	CONSTRAINT CHECK_DATE CHECK(FECHA_INICIO < FECHA_FIN)
	)
CREATE TABLE ALUMNOS (
	NOMBRE VARCHAR(50) NOT NULL,
	APELLIDO1 VARCHAR(50) NOT NULL,
	APELLIDO2 VARCHAR(50),
	DNI VARCHAR(9) PRIMARY KEY,
	DIRECCION VARCHAR(255),
	SEXO CHAR(1) NOT NULL CHECK(SEXO IN ('H','M')),
	FECHA_NACIMIENTO DATE NOT NULL,
	CURSO INT FOREIGN KEY REFERENCES CURSOS(COD_CURSO) ON DELETE SET NULL ON UPDATE CASCADE
)